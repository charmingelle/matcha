{"ast":null,"code":"import _classCallCheck from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _objectSpread from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"/Users/grevenko/projects/matcha/client/src/components/DownshiftMultiple/DownshiftMultiple.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport deburr from \"lodash/deburr\";\nimport keycode from \"keycode\";\nimport Downshift from \"downshift\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Popper from \"@material-ui/core/Popper\";\nimport Paper from \"@material-ui/core/Paper\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Chip from \"@material-ui/core/Chip\";\nimport { createStore } from \"redux\";\nvar interests = [];\n\nvar addInterests = function addInterests() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === 'ADD_INTEREST') {\n    return _toConsumableArray(state).concat([action.interest]);\n  }\n\n  return state;\n};\n\nvar store = createStore(addInterests);\nstore.subscribe(function () {\n  // console.log('subscribe', store.getState());\n  interests = _toConsumableArray(interests).concat(_toConsumableArray(store.getState())); // console.log('interests', interests);\n\n  console.log(interests);\n}); // store.dispatch({'type': 'ADD_INTEREST', 'interest': {'label': 'running'}});\n// store.dispatch({'type': 'ADD_INTEREST', 'interest': {'label': 'singing'}});\n\nfetch(\"/interests\", {\n  method: \"POST\",\n  credentials: \"include\"\n}).then(function (response) {\n  return response.json();\n}).then(function (interests) {\n  interests.forEach(function (interest) {\n    store.dispatch({\n      'type': 'ADD_INTEREST',\n      'interest': interest\n    });\n  });\n});\n\nfunction enterPressHandler(event) {\n  if (event.key === 'Enter') {\n    store.dispatch({\n      'type': 'ADD_INTEREST',\n      'interest': event.target.value\n    });\n    this.setState({\n      inputValue: event.target.value\n    });\n  }\n}\n\nfunction renderInput(inputProps) {\n  var InputProps = inputProps.InputProps,\n      classes = inputProps.classes,\n      ref = inputProps.ref,\n      other = _objectWithoutProperties(inputProps, [\"InputProps\", \"classes\", \"ref\"]);\n\n  return React.createElement(TextField, Object.assign({\n    InputProps: _objectSpread({\n      inputRef: ref,\n      classes: {\n        root: classes.inputRoot,\n        input: classes.inputInput\n      },\n      onKeyPress: enterPressHandler\n    }, InputProps)\n  }, other, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }));\n}\n\nfunction renderSuggestion(_ref) {\n  var suggestion = _ref.suggestion,\n      index = _ref.index,\n      itemProps = _ref.itemProps,\n      highlightedIndex = _ref.highlightedIndex,\n      selectedItem = _ref.selectedItem;\n  var isHighlighted = highlightedIndex === index;\n  var isSelected = (selectedItem || \"\").indexOf(suggestion) > -1;\n  return React.createElement(MenuItem, Object.assign({}, itemProps, {\n    key: suggestion,\n    selected: isHighlighted,\n    component: \"div\",\n    style: {\n      fontWeight: isSelected ? 500 : 400\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), suggestion);\n}\n\nrenderSuggestion.propTypes = {\n  highlightedIndex: PropTypes.number,\n  index: PropTypes.number,\n  itemProps: PropTypes.object,\n  selectedItem: PropTypes.string,\n  suggestion: PropTypes.shape({\n    label: PropTypes.string\n  }).isRequired\n};\n\nfunction getInterests(value) {\n  var inputValue = deburr(value.trim()).toLowerCase();\n  var inputLength = inputValue.length;\n  var count = 0;\n  return inputLength === 0 ? [] : store.getState().filter(function (suggestion) {\n    var keep = count < 5 && suggestion.slice(0, inputLength).toLowerCase() === inputValue;\n\n    if (keep) {\n      count += 1;\n    }\n\n    return keep;\n  });\n}\n\nvar DownshiftMultiple =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DownshiftMultiple, _React$Component);\n\n  function DownshiftMultiple() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DownshiftMultiple);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DownshiftMultiple)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      inputValue: \"\",\n      selectedItem: []\n    };\n\n    _this.handleKeyDown = function (event) {\n      var _this$state = _this.state,\n          inputValue = _this$state.inputValue,\n          selectedItem = _this$state.selectedItem;\n\n      if (selectedItem.length && !inputValue.length && keycode(event) === \"backspace\") {\n        _this.setState({\n          selectedItem: selectedItem.slice(0, selectedItem.length - 1)\n        });\n      }\n    };\n\n    _this.handleInputChange = function (event) {\n      _this.setState({\n        inputValue: event.target.value\n      });\n    };\n\n    _this.handleChange = function (item) {\n      var selectedItem = _this.state.selectedItem;\n\n      if (selectedItem.indexOf(item) === -1) {\n        selectedItem = _toConsumableArray(selectedItem).concat([item]);\n      }\n\n      _this.setState({\n        inputValue: \"\",\n        selectedItem: selectedItem\n      });\n    };\n\n    _this.handleDelete = function (item) {\n      return function () {\n        _this.setState(function (state) {\n          var selectedItem = _toConsumableArray(state.selectedItem);\n\n          selectedItem.splice(selectedItem.indexOf(item), 1);\n          return {\n            selectedItem: selectedItem\n          };\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(DownshiftMultiple, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var _this$state2 = this.state,\n          inputValue = _this$state2.inputValue,\n          selectedItem = _this$state2.selectedItem;\n      return React.createElement(Downshift, {\n        id: \"downshift-multiple\",\n        inputValue: inputValue,\n        onChange: this.handleChange,\n        selectedItem: selectedItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, function (_ref2) {\n        var getInputProps = _ref2.getInputProps,\n            getItemProps = _ref2.getItemProps,\n            isOpen = _ref2.isOpen,\n            inputValue2 = _ref2.inputValue,\n            selectedItem2 = _ref2.selectedItem,\n            highlightedIndex = _ref2.highlightedIndex;\n        return React.createElement(\"div\", {\n          className: classes.container,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, renderInput({\n          fullWidth: true,\n          classes: classes,\n          InputProps: getInputProps({\n            startAdornment: selectedItem.map(function (item) {\n              return React.createElement(Chip, {\n                key: item,\n                tabIndex: -1,\n                label: item,\n                className: classes.chip,\n                onDelete: _this2.handleDelete(item),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 198\n                },\n                __self: this\n              });\n            }),\n            onChange: _this2.handleInputChange,\n            onKeyDown: _this2.handleKeyDown,\n            placeholder: \"Select multiple interests\"\n          }),\n          label: \"Interests\"\n        }), isOpen ? React.createElement(Paper, {\n          className: classes.paper,\n          square: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, getInterests(inputValue2).map(function (suggestion, index) {\n          return renderSuggestion({\n            suggestion: suggestion,\n            index: index,\n            itemProps: getItemProps({\n              item: suggestion\n            }),\n            highlightedIndex: highlightedIndex,\n            selectedItem: selectedItem2\n          });\n        })) : null);\n      });\n    }\n  }]);\n\n  return DownshiftMultiple;\n}(React.Component);\n\nDownshiftMultiple.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      margin: \"8px\",\n      flexGrow: 1,\n      height: 250\n    },\n    container: {\n      margin: \"8px\",\n      flexGrow: 1,\n      position: \"relative\"\n    },\n    paper: {\n      position: \"absolute\",\n      zIndex: 1,\n      marginTop: theme.spacing.unit,\n      left: 0,\n      right: 0\n    },\n    chip: {\n      margin: \"\".concat(theme.spacing.unit / 2, \"px \").concat(theme.spacing.unit / 4, \"px\")\n    },\n    inputRoot: {\n      flexWrap: \"wrap\"\n    },\n    inputInput: {\n      width: \"auto\",\n      flexGrow: 1\n    },\n    divider: {\n      height: theme.spacing.unit * 2\n    }\n  };\n};\n\nvar popperNode;\n\nfunction IntegrationDownshift(props) {\n  var classes = props.classes;\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  }, React.createElement(DownshiftMultiple, {\n    classes: classes,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276\n    },\n    __self: this\n  }));\n}\n\nIntegrationDownshift.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(IntegrationDownshift);","map":{"version":3,"sources":["/Users/grevenko/projects/matcha/client/src/components/DownshiftMultiple/DownshiftMultiple.js"],"names":["React","PropTypes","deburr","keycode","Downshift","withStyles","TextField","Popper","Paper","MenuItem","Chip","createStore","interests","addInterests","state","action","type","interest","store","subscribe","getState","console","log","fetch","method","credentials","then","response","json","forEach","dispatch","enterPressHandler","event","key","target","value","setState","inputValue","renderInput","inputProps","InputProps","classes","ref","other","inputRef","root","inputRoot","input","inputInput","onKeyPress","renderSuggestion","suggestion","index","itemProps","highlightedIndex","selectedItem","isHighlighted","isSelected","indexOf","fontWeight","propTypes","number","object","string","shape","label","isRequired","getInterests","trim","toLowerCase","inputLength","length","count","filter","keep","slice","DownshiftMultiple","handleKeyDown","handleInputChange","handleChange","item","handleDelete","splice","props","getInputProps","getItemProps","isOpen","inputValue2","selectedItem2","container","fullWidth","startAdornment","map","chip","onChange","onKeyDown","placeholder","paper","Component","styles","theme","margin","flexGrow","height","position","zIndex","marginTop","spacing","unit","left","right","flexWrap","width","divider","popperNode","IntegrationDownshift"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AAEA,SAASC,WAAT,QAA4B,OAA5B;AAEA,IAAIC,SAAS,GAAG,EAAhB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAwB;AAAA,MAAvBC,KAAuB,uEAAf,EAAe;AAAA,MAAXC,MAAW;;AAC3C,MAAIA,MAAM,CAACC,IAAP,KAAgB,cAApB,EAAoC;AAClC,8BACKF,KADL,UAEEC,MAAM,CAACE,QAFT;AAID;;AACD,SAAOH,KAAP;AACD,CARD;;AAUA,IAAII,KAAK,GAAGP,WAAW,CAACE,YAAD,CAAvB;AAEAK,KAAK,CAACC,SAAN,CAAgB,YAAM;AACpB;AACAP,EAAAA,SAAS,sBAAOA,SAAP,4BAAqBM,KAAK,CAACE,QAAN,EAArB,EAAT,CAFoB,CAGpB;;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYV,SAAZ;AACD,CALD,E,CAOA;AACA;;AAGAW,KAAK,CAAC,YAAD,EAAe;AAClBC,EAAAA,MAAM,EAAE,MADU;AAElBC,EAAAA,WAAW,EAAE;AAFK,CAAf,CAAL,CAIGC,IAJH,CAIQ,UAAAC,QAAQ;AAAA,SAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,CAJhB,EAKGF,IALH,CAKQ,UAAAd,SAAS,EAAI;AACjBA,EAAAA,SAAS,CAACiB,OAAV,CAAkB,UAAAZ,QAAQ,EAAI;AAC5BC,IAAAA,KAAK,CAACY,QAAN,CAAe;AAAC,cAAQ,cAAT;AAAyB,kBAAYb;AAArC,KAAf;AACD,GAFD;AAGD,CATH;;AAWA,SAASc,iBAAT,CAA2BC,KAA3B,EAAkC;AAChC,MAAIA,KAAK,CAACC,GAAN,KAAc,OAAlB,EAA2B;AACzBf,IAAAA,KAAK,CAACY,QAAN,CAAe;AAAC,cAAQ,cAAT;AAAyB,kBAAYE,KAAK,CAACE,MAAN,CAAaC;AAAlD,KAAf;AACE,SAAKC,QAAL,CAAc;AAAEC,MAAAA,UAAU,EAAEL,KAAK,CAACE,MAAN,CAAaC;AAA3B,KAAd;AACH;AACF;;AAED,SAASG,WAAT,CAAqBC,UAArB,EAAiC;AAAA,MACvBC,UADuB,GACgBD,UADhB,CACvBC,UADuB;AAAA,MACXC,OADW,GACgBF,UADhB,CACXE,OADW;AAAA,MACFC,GADE,GACgBH,UADhB,CACFG,GADE;AAAA,MACMC,KADN,4BACgBJ,UADhB;;AAG/B,SACE,oBAAC,SAAD;AACA,IAAA,UAAU;AACNK,MAAAA,QAAQ,EAAEF,GADJ;AAEND,MAAAA,OAAO,EAAE;AACPI,QAAAA,IAAI,EAAEJ,OAAO,CAACK,SADP;AAEPC,QAAAA,KAAK,EAAEN,OAAO,CAACO;AAFR,OAFH;AAMNC,MAAAA,UAAU,EAAElB;AANN,OAOHS,UAPG;AADV,KAUMG,KAVN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;AAcD;;AAED,SAASO,gBAAT,OAMG;AAAA,MALDC,UAKC,QALDA,UAKC;AAAA,MAJDC,KAIC,QAJDA,KAIC;AAAA,MAHDC,SAGC,QAHDA,SAGC;AAAA,MAFDC,gBAEC,QAFDA,gBAEC;AAAA,MADDC,YACC,QADDA,YACC;AACD,MAAMC,aAAa,GAAGF,gBAAgB,KAAKF,KAA3C;AACA,MAAMK,UAAU,GAAG,CAACF,YAAY,IAAI,EAAjB,EAAqBG,OAArB,CAA6BP,UAA7B,IAA2C,CAAC,CAA/D;AAEA,SACE,oBAAC,QAAD,oBACME,SADN;AAEE,IAAA,GAAG,EAAEF,UAFP;AAGE,IAAA,QAAQ,EAAEK,aAHZ;AAIE,IAAA,SAAS,EAAC,KAJZ;AAKE,IAAA,KAAK,EAAE;AACLG,MAAAA,UAAU,EAAEF,UAAU,GAAG,GAAH,GAAS;AAD1B,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASGN,UATH,CADF;AAaD;;AACDD,gBAAgB,CAACU,SAAjB,GAA6B;AAC3BN,EAAAA,gBAAgB,EAAErD,SAAS,CAAC4D,MADD;AAE3BT,EAAAA,KAAK,EAAEnD,SAAS,CAAC4D,MAFU;AAG3BR,EAAAA,SAAS,EAAEpD,SAAS,CAAC6D,MAHM;AAI3BP,EAAAA,YAAY,EAAEtD,SAAS,CAAC8D,MAJG;AAK3BZ,EAAAA,UAAU,EAAElD,SAAS,CAAC+D,KAAV,CAAgB;AAAEC,IAAAA,KAAK,EAAEhE,SAAS,CAAC8D;AAAnB,GAAhB,EAA6CG;AAL9B,CAA7B;;AAQA,SAASC,YAAT,CAAsBhC,KAAtB,EAA6B;AAC3B,MAAME,UAAU,GAAGnC,MAAM,CAACiC,KAAK,CAACiC,IAAN,EAAD,CAAN,CAAqBC,WAArB,EAAnB;AACA,MAAMC,WAAW,GAAGjC,UAAU,CAACkC,MAA/B;AACA,MAAIC,KAAK,GAAG,CAAZ;AAEA,SAAOF,WAAW,KAAK,CAAhB,GACH,EADG,GAEHpD,KAAK,CAACE,QAAN,GAAiBqD,MAAjB,CAAwB,UAAAtB,UAAU,EAAI;AACpC,QAAMuB,IAAI,GACRF,KAAK,GAAG,CAAR,IACArB,UAAU,CAACwB,KAAX,CAAiB,CAAjB,EAAoBL,WAApB,EAAiCD,WAAjC,OAAmDhC,UAFrD;;AAIA,QAAIqC,IAAJ,EAAU;AACRF,MAAAA,KAAK,IAAI,CAAT;AACD;;AAED,WAAOE,IAAP;AACD,GAVD,CAFJ;AAaD;;IAEKE,iB;;;;;;;;;;;;;;;;;UACJ9D,K,GAAQ;AACNuB,MAAAA,UAAU,EAAE,EADN;AAENkB,MAAAA,YAAY,EAAE;AAFR,K;;UAKRsB,a,GAAgB,UAAA7C,KAAK,EAAI;AAAA,wBACc,MAAKlB,KADnB;AAAA,UACfuB,UADe,eACfA,UADe;AAAA,UACHkB,YADG,eACHA,YADG;;AAEvB,UACEA,YAAY,CAACgB,MAAb,IACA,CAAClC,UAAU,CAACkC,MADZ,IAEApE,OAAO,CAAC6B,KAAD,CAAP,KAAmB,WAHrB,EAIE;AACA,cAAKI,QAAL,CAAc;AACZmB,UAAAA,YAAY,EAAEA,YAAY,CAACoB,KAAb,CAAmB,CAAnB,EAAsBpB,YAAY,CAACgB,MAAb,GAAsB,CAA5C;AADF,SAAd;AAGD;AACF,K;;UAEDO,iB,GAAoB,UAAA9C,KAAK,EAAI;AAC3B,YAAKI,QAAL,CAAc;AAAEC,QAAAA,UAAU,EAAEL,KAAK,CAACE,MAAN,CAAaC;AAA3B,OAAd;AACD,K;;UAED4C,Y,GAAe,UAAAC,IAAI,EAAI;AAAA,UACfzB,YADe,GACE,MAAKzC,KADP,CACfyC,YADe;;AAGrB,UAAIA,YAAY,CAACG,OAAb,CAAqBsB,IAArB,MAA+B,CAAC,CAApC,EAAuC;AACrCzB,QAAAA,YAAY,sBAAOA,YAAP,UAAqByB,IAArB,EAAZ;AACD;;AAED,YAAK5C,QAAL,CAAc;AACZC,QAAAA,UAAU,EAAE,EADA;AAEZkB,QAAAA,YAAY,EAAZA;AAFY,OAAd;AAID,K;;UAED0B,Y,GAAe,UAAAD,IAAI;AAAA,aAAI,YAAM;AAC3B,cAAK5C,QAAL,CAAc,UAAAtB,KAAK,EAAI;AACrB,cAAMyC,YAAY,sBAAOzC,KAAK,CAACyC,YAAb,CAAlB;;AACAA,UAAAA,YAAY,CAAC2B,MAAb,CAAoB3B,YAAY,CAACG,OAAb,CAAqBsB,IAArB,CAApB,EAAgD,CAAhD;AACA,iBAAO;AAAEzB,YAAAA,YAAY,EAAZA;AAAF,WAAP;AACD,SAJD;AAKD,OANkB;AAAA,K;;;;;;;6BAQV;AAAA;;AAAA,UACCd,OADD,GACa,KAAK0C,KADlB,CACC1C,OADD;AAAA,yBAE8B,KAAK3B,KAFnC;AAAA,UAECuB,UAFD,gBAECA,UAFD;AAAA,UAEakB,YAFb,gBAEaA,YAFb;AAIP,aACE,oBAAC,SAAD;AACE,QAAA,EAAE,EAAC,oBADL;AAEE,QAAA,UAAU,EAAElB,UAFd;AAGE,QAAA,QAAQ,EAAE,KAAK0C,YAHjB;AAIE,QAAA,YAAY,EAAExB,YAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMG;AAAA,YACC6B,aADD,SACCA,aADD;AAAA,YAECC,YAFD,SAECA,YAFD;AAAA,YAGCC,MAHD,SAGCA,MAHD;AAAA,YAIaC,WAJb,SAIClD,UAJD;AAAA,YAKemD,aALf,SAKCjC,YALD;AAAA,YAMCD,gBAND,SAMCA,gBAND;AAAA,eAQC;AAAK,UAAA,SAAS,EAAEb,OAAO,CAACgD,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGnD,WAAW,CAAC;AACXoD,UAAAA,SAAS,EAAE,IADA;AAEXjD,UAAAA,OAAO,EAAPA,OAFW;AAGXD,UAAAA,UAAU,EAAE4C,aAAa,CAAC;AACxBO,YAAAA,cAAc,EAAEpC,YAAY,CAACqC,GAAb,CAAiB,UAAAZ,IAAI;AAAA,qBACnC,oBAAC,IAAD;AACE,gBAAA,GAAG,EAAEA,IADP;AAEE,gBAAA,QAAQ,EAAE,CAAC,CAFb;AAGE,gBAAA,KAAK,EAAEA,IAHT;AAIE,gBAAA,SAAS,EAAEvC,OAAO,CAACoD,IAJrB;AAKE,gBAAA,QAAQ,EAAE,MAAI,CAACZ,YAAL,CAAkBD,IAAlB,CALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADmC;AAAA,aAArB,CADQ;AAUxBc,YAAAA,QAAQ,EAAE,MAAI,CAAChB,iBAVS;AAWxBiB,YAAAA,SAAS,EAAE,MAAI,CAAClB,aAXQ;AAYxBmB,YAAAA,WAAW,EAAE;AAZW,WAAD,CAHd;AAiBX/B,UAAAA,KAAK,EAAE;AAjBI,SAAD,CADd,EAoBGqB,MAAM,GACL,oBAAC,KAAD;AAAO,UAAA,SAAS,EAAE7C,OAAO,CAACwD,KAA1B;AAAiC,UAAA,MAAM,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG9B,YAAY,CAACoB,WAAD,CAAZ,CAA0BK,GAA1B,CAA8B,UAACzC,UAAD,EAAaC,KAAb;AAAA,iBAC7BF,gBAAgB,CAAC;AACfC,YAAAA,UAAU,EAAVA,UADe;AAEfC,YAAAA,KAAK,EAALA,KAFe;AAGfC,YAAAA,SAAS,EAAEgC,YAAY,CAAC;AAAEL,cAAAA,IAAI,EAAE7B;AAAR,aAAD,CAHR;AAIfG,YAAAA,gBAAgB,EAAhBA,gBAJe;AAKfC,YAAAA,YAAY,EAAEiC;AALC,WAAD,CADa;AAAA,SAA9B,CADH,CADK,GAYH,IAhCN,CARD;AAAA,OANH,CADF;AAoDD;;;;EApG6BxF,KAAK,CAACkG,S;;AAuGtCtB,iBAAiB,CAAChB,SAAlB,GAA8B;AAC5BnB,EAAAA,OAAO,EAAExC,SAAS,CAAC6D,MAAV,CAAiBI;AADE,CAA9B;;AAIA,IAAMiC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AACvBvD,IAAAA,IAAI,EAAE;AACJwD,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,QAAQ,EAAE,CAFN;AAGJC,MAAAA,MAAM,EAAE;AAHJ,KADiB;AAMvBd,IAAAA,SAAS,EAAE;AACTY,MAAAA,MAAM,EAAE,KADC;AAETC,MAAAA,QAAQ,EAAE,CAFD;AAGTE,MAAAA,QAAQ,EAAE;AAHD,KANY;AAWvBP,IAAAA,KAAK,EAAE;AACLO,MAAAA,QAAQ,EAAE,UADL;AAELC,MAAAA,MAAM,EAAE,CAFH;AAGLC,MAAAA,SAAS,EAAEN,KAAK,CAACO,OAAN,CAAcC,IAHpB;AAILC,MAAAA,IAAI,EAAE,CAJD;AAKLC,MAAAA,KAAK,EAAE;AALF,KAXgB;AAkBvBjB,IAAAA,IAAI,EAAE;AACJQ,MAAAA,MAAM,YAAKD,KAAK,CAACO,OAAN,CAAcC,IAAd,GAAqB,CAA1B,gBAAiCR,KAAK,CAACO,OAAN,CAAcC,IAAd,GAAqB,CAAtD;AADF,KAlBiB;AAqBvB9D,IAAAA,SAAS,EAAE;AACTiE,MAAAA,QAAQ,EAAE;AADD,KArBY;AAwBvB/D,IAAAA,UAAU,EAAE;AACVgE,MAAAA,KAAK,EAAE,MADG;AAEVV,MAAAA,QAAQ,EAAE;AAFA,KAxBW;AA4BvBW,IAAAA,OAAO,EAAE;AACPV,MAAAA,MAAM,EAAEH,KAAK,CAACO,OAAN,CAAcC,IAAd,GAAqB;AADtB;AA5Bc,GAAL;AAAA,CAApB;;AAiCA,IAAIM,UAAJ;;AAEA,SAASC,oBAAT,CAA8BhC,KAA9B,EAAqC;AAAA,MAC3B1C,OAD2B,GACf0C,KADe,CAC3B1C,OAD2B;AAGnC,SACE;AAAK,IAAA,SAAS,EAAEA,OAAO,CAACI,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,iBAAD;AAAmB,IAAA,OAAO,EAAEJ,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AAED0E,oBAAoB,CAACvD,SAArB,GAAiC;AAC/BnB,EAAAA,OAAO,EAAExC,SAAS,CAAC6D,MAAV,CAAiBI;AADK,CAAjC;AAIA,eAAe7D,UAAU,CAAC8F,MAAD,CAAV,CAAmBgB,oBAAnB,CAAf","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport deburr from \"lodash/deburr\";\nimport keycode from \"keycode\";\nimport Downshift from \"downshift\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Popper from \"@material-ui/core/Popper\";\nimport Paper from \"@material-ui/core/Paper\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Chip from \"@material-ui/core/Chip\";\n\nimport { createStore } from \"redux\";\n\nlet interests = [];\n\nconst addInterests = (state = [], action) => {\n  if (action.type === 'ADD_INTEREST') {\n    return [\n      ...state,\n      action.interest\n    ]\n  }\n  return state;\n};\n\nlet store = createStore(addInterests);\n\nstore.subscribe(() => {\n  // console.log('subscribe', store.getState());\n  interests = [...interests, ...store.getState()];\n  // console.log('interests', interests);\n  console.log(interests);\n});\n\n// store.dispatch({'type': 'ADD_INTEREST', 'interest': {'label': 'running'}});\n// store.dispatch({'type': 'ADD_INTEREST', 'interest': {'label': 'singing'}});\n\n\nfetch(\"/interests\", {\n  method: \"POST\",\n  credentials: \"include\"\n})\n  .then(response => response.json())\n  .then(interests => {\n    interests.forEach(interest => {\n      store.dispatch({'type': 'ADD_INTEREST', 'interest': interest});\n    });\n  });\n\nfunction enterPressHandler(event) {\n  if (event.key === 'Enter') {\n    store.dispatch({'type': 'ADD_INTEREST', 'interest': event.target.value});\n      this.setState({ inputValue: event.target.value });\n  }\n}\n\nfunction renderInput(inputProps) {\n  const { InputProps, classes, ref, ...other } = inputProps;\n\n  return (\n    <TextField\n    InputProps={{\n        inputRef: ref,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        onKeyPress: enterPressHandler,\n        ...InputProps\n      }}\n      {...other}\n    />\n  );\n}\n\nfunction renderSuggestion({\n  suggestion,\n  index,\n  itemProps,\n  highlightedIndex,\n  selectedItem\n}) {\n  const isHighlighted = highlightedIndex === index;\n  const isSelected = (selectedItem || \"\").indexOf(suggestion) > -1;\n\n  return (\n    <MenuItem\n      {...itemProps}\n      key={suggestion}\n      selected={isHighlighted}\n      component=\"div\"\n      style={{\n        fontWeight: isSelected ? 500 : 400\n      }}\n    >\n      {suggestion}\n    </MenuItem>\n  );\n}\nrenderSuggestion.propTypes = {\n  highlightedIndex: PropTypes.number,\n  index: PropTypes.number,\n  itemProps: PropTypes.object,\n  selectedItem: PropTypes.string,\n  suggestion: PropTypes.shape({ label: PropTypes.string }).isRequired\n};\n\nfunction getInterests(value) {\n  const inputValue = deburr(value.trim()).toLowerCase();\n  const inputLength = inputValue.length;\n  let count = 0;\n\n  return inputLength === 0\n    ? []\n    : store.getState().filter(suggestion => {\n        const keep =\n          count < 5 &&\n          suggestion.slice(0, inputLength).toLowerCase() === inputValue;\n\n        if (keep) {\n          count += 1;\n        }\n\n        return keep;\n      });\n}\n\nclass DownshiftMultiple extends React.Component {\n  state = {\n    inputValue: \"\",\n    selectedItem: []\n  };\n\n  handleKeyDown = event => {\n    const { inputValue, selectedItem } = this.state;\n    if (\n      selectedItem.length &&\n      !inputValue.length &&\n      keycode(event) === \"backspace\"\n    ) {\n      this.setState({\n        selectedItem: selectedItem.slice(0, selectedItem.length - 1)\n      });\n    }\n  };\n\n  handleInputChange = event => {\n    this.setState({ inputValue: event.target.value });\n  };\n\n  handleChange = item => {\n    let { selectedItem } = this.state;\n\n    if (selectedItem.indexOf(item) === -1) {\n      selectedItem = [...selectedItem, item];\n    }\n\n    this.setState({\n      inputValue: \"\",\n      selectedItem\n    });\n  };\n\n  handleDelete = item => () => {\n    this.setState(state => {\n      const selectedItem = [...state.selectedItem];\n      selectedItem.splice(selectedItem.indexOf(item), 1);\n      return { selectedItem };\n    });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { inputValue, selectedItem } = this.state;\n\n    return (\n      <Downshift\n        id=\"downshift-multiple\"\n        inputValue={inputValue}\n        onChange={this.handleChange}\n        selectedItem={selectedItem}\n      >\n        {({\n          getInputProps,\n          getItemProps,\n          isOpen,\n          inputValue: inputValue2,\n          selectedItem: selectedItem2,\n          highlightedIndex\n        }) => (\n          <div className={classes.container}>\n            {renderInput({\n              fullWidth: true,\n              classes,\n              InputProps: getInputProps({\n                startAdornment: selectedItem.map(item => (\n                  <Chip\n                    key={item}\n                    tabIndex={-1}\n                    label={item}\n                    className={classes.chip}\n                    onDelete={this.handleDelete(item)}\n                  />\n                )),\n                onChange: this.handleInputChange,\n                onKeyDown: this.handleKeyDown,\n                placeholder: \"Select multiple interests\"\n              }),\n              label: \"Interests\"\n            })}\n            {isOpen ? (\n              <Paper className={classes.paper} square>\n                {getInterests(inputValue2).map((suggestion, index) =>\n                  renderSuggestion({\n                    suggestion,\n                    index,\n                    itemProps: getItemProps({ item: suggestion }),\n                    highlightedIndex,\n                    selectedItem: selectedItem2\n                  })\n                )}\n              </Paper>\n            ) : null}\n          </div>\n        )}\n      </Downshift>\n    );\n  }\n}\n\nDownshiftMultiple.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nconst styles = theme => ({\n  root: {\n    margin: \"8px\",\n    flexGrow: 1,\n    height: 250\n  },\n  container: {\n    margin: \"8px\",\n    flexGrow: 1,\n    position: \"relative\"\n  },\n  paper: {\n    position: \"absolute\",\n    zIndex: 1,\n    marginTop: theme.spacing.unit,\n    left: 0,\n    right: 0\n  },\n  chip: {\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`\n  },\n  inputRoot: {\n    flexWrap: \"wrap\"\n  },\n  inputInput: {\n    width: \"auto\",\n    flexGrow: 1\n  },\n  divider: {\n    height: theme.spacing.unit * 2\n  }\n});\n\nlet popperNode;\n\nfunction IntegrationDownshift(props) {\n  const { classes } = props;\n\n  return (\n    <div className={classes.root}>\n      <DownshiftMultiple classes={classes} />\n    </div>\n  );\n}\n\nIntegrationDownshift.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(IntegrationDownshift);\n"]},"metadata":{},"sourceType":"module"}