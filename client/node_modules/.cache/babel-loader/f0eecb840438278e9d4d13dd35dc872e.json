{"ast":null,"code":"import _toConsumableArray from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _objectSpread from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/grevenko/projects/matcha/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/grevenko/projects/matcha/client/src/components/DownshiftMultiple/DownshiftMultiple.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport deburr from 'lodash/deburr';\nimport keycode from 'keycode';\nimport Downshift from 'downshift';\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Popper from '@material-ui/core/Popper';\nimport Paper from '@material-ui/core/Paper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Chip from '@material-ui/core/Chip';\n\nvar Interests = function Interests(props) {\n  var inputProps = props.inputProps,\n      handleAdding = props.handleAdding,\n      other = _objectWithoutProperties(props, [\"inputProps\", \"handleAdding\"]);\n\n  var ref = inputProps.ref,\n      otherInputProps = _objectWithoutProperties(inputProps, [\"ref\"]);\n\n  return React.createElement(TextField, Object.assign({\n    InputProps: _objectSpread({\n      inputRef: ref\n    }, otherInputProps)\n  }, other, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }));\n};\n\nfunction renderSuggestion(_ref) {\n  var suggestion = _ref.suggestion,\n      index = _ref.index,\n      itemProps = _ref.itemProps,\n      highlightedIndex = _ref.highlightedIndex,\n      selectedItem = _ref.selectedItem;\n  var isHighlighted = highlightedIndex === index;\n  var isSelected = (selectedItem || '').indexOf(suggestion) > -1;\n  return React.createElement(MenuItem, Object.assign({}, itemProps, {\n    key: index,\n    selected: isHighlighted,\n    component: \"div\",\n    style: {\n      fontWeight: isSelected ? 500 : 400\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), suggestion);\n}\n\nrenderSuggestion.propTypes = {\n  highlightedIndex: PropTypes.number,\n  index: PropTypes.number,\n  itemProps: PropTypes.object,\n  selectedItem: PropTypes.string,\n  suggestion: PropTypes.shape({\n    label: PropTypes.string\n  }).isRequired\n};\n\nfunction getSuggestions(interests, value) {\n  var inputValue = deburr(value.trim()).toLowerCase();\n  var inputLength = inputValue.length;\n  var count = 0;\n  return inputLength === 0 ? [] : interests.filter(function (suggestion) {\n    var keep = count < 5 && suggestion.slice(0, inputLength).toLowerCase() === inputValue;\n\n    if (keep) {\n      count += 1;\n    }\n\n    return keep;\n  });\n}\n\nvar DownshiftMultiple =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DownshiftMultiple, _React$Component);\n\n  function DownshiftMultiple() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DownshiftMultiple);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DownshiftMultiple)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      inputValue: '',\n      selectedItem: [],\n      interests: [],\n      suggestions: []\n    };\n\n    _this.handleKeyDown = function (event) {\n      var _this$state = _this.state,\n          inputValue = _this$state.inputValue,\n          selectedItem = _this$state.selectedItem;\n\n      if (selectedItem.length && !inputValue.length && keycode(event) === 'backspace') {\n        _this.setState({\n          selectedItem: selectedItem.slice(0, selectedItem.length - 1)\n        });\n      }\n\n      if (keycode(event) === 'space' && inputValue.length) {\n        _this.handleChange(inputValue);\n      }\n    };\n\n    _this.handleInputChange = function (_ref2) {\n      var target = _ref2.target;\n      var _this$state2 = _this.state,\n          interests = _this$state2.interests,\n          selectedItem = _this$state2.selectedItem;\n\n      _this.setState({\n        inputValue: target.value,\n        suggestions: _toConsumableArray(getSuggestions(interests, target.value))\n      });\n    };\n\n    _this.handleChange = function (item) {\n      var _this$state3 = _this.state,\n          interests = _this$state3.interests,\n          selectedItem = _this$state3.selectedItem;\n\n      if (selectedItem.indexOf(item) === -1) {\n        selectedItem = _toConsumableArray(selectedItem).concat([item]);\n      }\n\n      if (interests.indexOf(item) === -1) {\n        interests = _toConsumableArray(interests).concat([item]);\n      }\n\n      _this.setState({\n        inputValue: '',\n        selectedItem: selectedItem,\n        interests: interests\n      });\n\n      console.log('change selectedItem', selectedItem);\n\n      _this.props.onChange({\n        interests: selectedItem\n      });\n    };\n\n    _this.handleDelete = function (item) {\n      return function () {\n        console.log('handleDelete is called'); // this.setState(state => {\n        //   const selectedItem = [...state.selectedItem];\n        //   selectedItem.splice(selectedItem.indexOf(item), 1);\n        //   return { selectedItem };\n        // });\n\n        var selectedItem = _this.state.selectedItem;\n        console.log('selectedItem', selectedItem);\n        console.log('item index', selectedItem.indexOf(item));\n\n        _this.setState({\n          selectedItem: selectedItem.splice(selectedItem.indexOf(item), 1)\n        });\n\n        console.log('change selectedItem', _this.state.selectedItem);\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(DownshiftMultiple, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        selectedItem: this.props.value,\n        interests: this.props.all\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var _this$state4 = this.state,\n          inputValue = _this$state4.inputValue,\n          selectedItem = _this$state4.selectedItem,\n          interests = _this$state4.interests,\n          suggestions = _this$state4.suggestions;\n\n      if (!interests) {\n        return null;\n      }\n\n      return React.createElement(Downshift, {\n        id: \"downshift-multiple\",\n        inputValue: inputValue,\n        onChange: this.handleChange,\n        selectedItem: selectedItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, function (_ref3) {\n        var getInputProps = _ref3.getInputProps,\n            getItemProps = _ref3.getItemProps,\n            isOpen = _ref3.isOpen,\n            selectedItem2 = _ref3.selectedItem,\n            highlightedIndex = _ref3.highlightedIndex;\n        return React.createElement(\"div\", {\n          className: classes.container,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, React.createElement(Interests, {\n          fullWidth: true,\n          interests: interests,\n          handleAdding: _this2.handleChange,\n          inputProps: getInputProps({\n            startAdornment: selectedItem.map(function (item, index) {\n              return React.createElement(Chip, {\n                key: index,\n                tabIndex: -1,\n                label: item,\n                className: classes.chip,\n                onDelete: _this2.handleDelete(item),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 187\n                },\n                __self: this\n              });\n            }),\n            onChange: _this2.handleInputChange,\n            onKeyDown: _this2.handleKeyDown,\n            placeholder: 'Select multiple interests'\n          }),\n          label: \"Interests\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }), isOpen ? React.createElement(Paper, {\n          className: classes.paper,\n          square: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, suggestions.map(function (suggestion, index) {\n          return renderSuggestion({\n            suggestion: suggestion,\n            index: index,\n            itemProps: getItemProps({\n              item: suggestion\n            }),\n            highlightedIndex: highlightedIndex,\n            selectedItem: selectedItem2\n          });\n        })) : null);\n      });\n    }\n  }]);\n\n  return DownshiftMultiple;\n}(React.Component);\n\nDownshiftMultiple.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      margin: '8px',\n      flexGrow: 1,\n      height: 250\n    },\n    container: {\n      margin: '8px',\n      flexGrow: 1,\n      position: 'relative'\n    },\n    paper: {\n      position: 'absolute',\n      zIndex: 1,\n      marginTop: theme.spacing.unit,\n      left: 0,\n      right: 0\n    },\n    chip: {\n      margin: \"\".concat(theme.spacing.unit / 2, \"px \").concat(theme.spacing.unit / 4, \"px\")\n    },\n    inputRoot: {\n      flexWrap: 'wrap'\n    },\n    inputInput: {\n      width: 'auto',\n      flexGrow: 1\n    },\n    divider: {\n      height: theme.spacing.unit * 2\n    }\n  };\n};\n\nvar popperNode;\n\nvar IntegrationDownshift =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(IntegrationDownshift, _React$Component2);\n\n  function IntegrationDownshift() {\n    _classCallCheck(this, IntegrationDownshift);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(IntegrationDownshift).apply(this, arguments));\n  }\n\n  _createClass(IntegrationDownshift, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          name = _this$props.name,\n          value = _this$props.value,\n          all = _this$props.all,\n          onChange = _this$props.onChange;\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(DownshiftMultiple, {\n        classes: classes,\n        name: name,\n        value: value,\n        all: all,\n        onChange: onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return IntegrationDownshift;\n}(React.Component);\n\nIntegrationDownshift.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(IntegrationDownshift);","map":{"version":3,"sources":["/Users/grevenko/projects/matcha/client/src/components/DownshiftMultiple/DownshiftMultiple.js"],"names":["React","PropTypes","deburr","keycode","Downshift","withStyles","TextField","Popper","Paper","MenuItem","Chip","Interests","props","inputProps","handleAdding","other","ref","otherInputProps","inputRef","renderSuggestion","suggestion","index","itemProps","highlightedIndex","selectedItem","isHighlighted","isSelected","indexOf","fontWeight","propTypes","number","object","string","shape","label","isRequired","getSuggestions","interests","value","inputValue","trim","toLowerCase","inputLength","length","count","filter","keep","slice","DownshiftMultiple","state","suggestions","handleKeyDown","event","setState","handleChange","handleInputChange","target","item","console","log","onChange","handleDelete","splice","all","classes","getInputProps","getItemProps","isOpen","selectedItem2","container","startAdornment","map","chip","onKeyDown","placeholder","paper","Component","styles","theme","root","margin","flexGrow","height","position","zIndex","marginTop","spacing","unit","left","right","inputRoot","flexWrap","inputInput","width","divider","popperNode","IntegrationDownshift","name"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport deburr from 'lodash/deburr';\nimport keycode from 'keycode';\nimport Downshift from 'downshift';\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Popper from '@material-ui/core/Popper';\nimport Paper from '@material-ui/core/Paper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Chip from '@material-ui/core/Chip';\n\nconst Interests = props => {\n  const { inputProps, handleAdding, ...other } = props;\n  const { ref, ...otherInputProps } = inputProps;\n\n  return (\n    <TextField\n      InputProps={{\n        inputRef: ref,\n        ...otherInputProps,\n      }}\n      {...other}\n    />\n  );\n};\n\nfunction renderSuggestion({\n  suggestion,\n  index,\n  itemProps,\n  highlightedIndex,\n  selectedItem,\n}) {\n  const isHighlighted = highlightedIndex === index;\n  const isSelected = (selectedItem || '').indexOf(suggestion) > -1;\n\n  return (\n    <MenuItem\n      {...itemProps}\n      key={index}\n      selected={isHighlighted}\n      component=\"div\"\n      style={{\n        fontWeight: isSelected ? 500 : 400,\n      }}\n    >\n      {suggestion}\n    </MenuItem>\n  );\n}\n\nrenderSuggestion.propTypes = {\n  highlightedIndex: PropTypes.number,\n  index: PropTypes.number,\n  itemProps: PropTypes.object,\n  selectedItem: PropTypes.string,\n  suggestion: PropTypes.shape({ label: PropTypes.string }).isRequired,\n};\n\nfunction getSuggestions(interests, value) {\n  const inputValue = deburr(value.trim()).toLowerCase();\n  const inputLength = inputValue.length;\n  let count = 0;\n\n  return inputLength === 0\n    ? []\n    : interests.filter(suggestion => {\n        const keep =\n          count < 5 &&\n          suggestion.slice(0, inputLength).toLowerCase() === inputValue;\n\n        if (keep) {\n          count += 1;\n        }\n\n        return keep;\n      });\n}\n\nclass DownshiftMultiple extends React.Component {\n  state = {\n    inputValue: '',\n    selectedItem: [],\n    interests: [],\n    suggestions: [],\n  };\n\n  componentDidMount() {\n    this.setState({ selectedItem: this.props.value, interests: this.props.all });\n  }\n\n  handleKeyDown = event => {\n    const { inputValue, selectedItem } = this.state;\n\n    if (\n      selectedItem.length &&\n      !inputValue.length &&\n      keycode(event) === 'backspace'\n    ) {\n      this.setState({\n        selectedItem: selectedItem.slice(0, selectedItem.length - 1),\n      });\n    }\n\n    if (keycode(event) === 'space' && inputValue.length) {\n      this.handleChange(inputValue);\n    }\n  };\n\n  handleInputChange = ({ target }) => {\n    const { interests, selectedItem } = this.state;\n\n    this.setState({\n      inputValue: target.value,\n      suggestions: [\n        ...getSuggestions(interests, target.value)\n      ],\n    });\n  };\n\n  handleChange = item => {\n    let { interests, selectedItem } = this.state;\n\n    if (selectedItem.indexOf(item) === -1) {\n      selectedItem = [...selectedItem, item];\n    }\n    if (interests.indexOf(item) === -1) {\n      interests = [...interests, item];\n    }\n\n    this.setState({\n      inputValue: '',\n      selectedItem,\n      interests\n    });\n    console.log('change selectedItem', selectedItem);\n    this.props.onChange({ interests: selectedItem });\n  };\n\n  handleDelete = item => () => {\n    console.log('handleDelete is called');\n    // this.setState(state => {\n    //   const selectedItem = [...state.selectedItem];\n    //   selectedItem.splice(selectedItem.indexOf(item), 1);\n    //   return { selectedItem };\n    // });\n    const selectedItem = this.state.selectedItem;\n\n    console.log('selectedItem', selectedItem);\n    console.log('item index', selectedItem.indexOf(item));\n    this.setState({\n      selectedItem: selectedItem.splice(selectedItem.indexOf(item), 1)\n    });\n    console.log('change selectedItem', this.state.selectedItem);\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { inputValue, selectedItem, interests, suggestions } = this.state;\n\n    if (!interests) {\n      return null;\n    }\n\n    return (\n      <Downshift\n        id=\"downshift-multiple\"\n        inputValue={inputValue}\n        onChange={this.handleChange}\n        selectedItem={selectedItem}\n      >\n        {({\n          getInputProps,\n          getItemProps,\n          isOpen,\n          selectedItem: selectedItem2,\n          highlightedIndex,\n        }) => (\n          <div className={classes.container}>\n            <Interests\n              fullWidth\n              interests={interests}\n              handleAdding={this.handleChange}\n              inputProps={getInputProps({\n                startAdornment: selectedItem.map((item, index) => (\n                  <Chip\n                    key={index}\n                    tabIndex={-1}\n                    label={item}\n                    className={classes.chip}\n                    onDelete={this.handleDelete(item)}\n                  />\n                )),\n                onChange: this.handleInputChange,\n                onKeyDown: this.handleKeyDown,\n                placeholder: 'Select multiple interests',\n              })}\n              label=\"Interests\"\n            />\n            {isOpen ? (\n              <Paper className={classes.paper} square>\n                {suggestions.map((suggestion, index) =>\n                  renderSuggestion({\n                    suggestion,\n                    index,\n                    itemProps: getItemProps({ item: suggestion }),\n                    highlightedIndex,\n                    selectedItem: selectedItem2,\n                  })\n                )}\n              </Paper>\n            ) : null}\n          </div>\n        )}\n      </Downshift>\n    );\n  }\n}\n\nDownshiftMultiple.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    margin: '8px',\n    flexGrow: 1,\n    height: 250,\n  },\n  container: {\n    margin: '8px',\n    flexGrow: 1,\n    position: 'relative',\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing.unit,\n    left: 0,\n    right: 0,\n  },\n  chip: {\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`,\n  },\n  inputRoot: {\n    flexWrap: 'wrap',\n  },\n  inputInput: {\n    width: 'auto',\n    flexGrow: 1,\n  },\n  divider: {\n    height: theme.spacing.unit * 2,\n  },\n});\n\nlet popperNode;\n\nclass IntegrationDownshift extends React.Component {\n  render() {\n    const { classes, name, value, all, onChange } = this.props;\n  \n    return (\n      <div className={classes.root}>\n        <DownshiftMultiple classes={classes} name={name} value={value} all={all} onChange={onChange} />\n      </div>\n    );\n  }\n}\n\nIntegrationDownshift.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(IntegrationDownshift);\n"]},"metadata":{},"sourceType":"module"}